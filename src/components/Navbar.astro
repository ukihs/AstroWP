---
interface Alt { lang: string; url: string }

const {
  lang = "th",
  showLinks = true,
  alternates = [] as Alt[],
} = Astro.props as {
  lang?: "th" | "en";
  showLinks?: boolean;
  alternates?: Alt[];
};

// หา URL ของภาษา
function altUrl(target: "th" | "en") {
  const found = alternates.find((a) => a.lang.toLowerCase() === target);
  if (found?.url) return found.url;
  // fallback ถ้าไม่มี translation
  return `/${target}`;
}
---

<nav class="mx-auto flex max-w-6xl items-center justify-between px-6 py-4">
  <a href={`/${lang}`} class="font-semibold">AstroWP</a>

  {showLinks && (
    <ul class="flex items-center gap-6">
      <li><a href={`/${lang}/articles`} class="hover:underline">
        {lang === "en" ? "Articles" : "บทความ"}
      </a></li>
      <li><a href={`/${lang}#about`} class="hover:underline">
        {lang === "en" ? "About" : "เกี่ยวกับเรา"}
      </a></li>
      <li><a href={`/${lang}#contact`} class="hover:underline">
        {lang === "en" ? "Contact" : "ติดต่อ"}
      </a></li>
    </ul>
  )}

  <div class="flex items-center gap-2">
    <a href={altUrl("th")}
       class={`px-2 py-0.5 rounded ${lang==="th"?"bg-slate-900 text-white":"hover:underline"}`}>
      TH
    </a>
    <a href={altUrl("en")}
       class={`px-2 py-0.5 rounded ${lang==="en"?"bg-slate-900 text-white":"hover:underline"}`}>
      EN
    </a>
  </div>
</nav>
